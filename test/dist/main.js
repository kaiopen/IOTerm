!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";function s(t){return t.replace(/[<>&]/g,(function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[t]}))}Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=s;var n=function(){function t(t){var e=this;this.term=document.createElement("div"),this.measurement=document.createElement("pre"),this.input=document.createElement("input"),this.container=document.createElement("div"),this.htmlPanel=document.createElement("pre"),this.tmpPanel=document.createElement("pre"),this.tabPanel=document.createElement("div"),this.cursor=document.createElement("div"),this.cursorBg=document.createElement("div"),this.cursorContent=document.createElement("div"),t.append(this.term),this.term.append(this.measurement,this.input,this.container,this.tabPanel,this.cursor),this.container.append(this.htmlPanel,this.tmpPanel),this.cursor.append(this.cursorBg,this.cursorContent),this.prefix="",this.lastLine="",this.numRows=1,this.history={index:0,items:[{value:"",modification:""}]},this.commandHandler=function(){e.end()},this.promptIndex=-1,this.tabHandler=function(){return['<span style="color: #729fcf;">.</span>','<span style="color: #729fcf;">..</span>','<span style="color: #729fcf;">abcd</span>']},this.setStyle(),this.addEventListeners(),this.moveCursor(this.numRows,0)}return t.prototype.end=function(){this.isRunning=!1,this.write(this.prefix)},t.prototype.resize=function(){var t=this.input.value,e=this.input.selectionStart;this.input.value="";var i=this.htmlPanel.innerHTML+this.lastLine;if(i=i.replace(/<br>/g,""),this.clearPanel(),this.write(i),t){this.inputText(t),this.input.value=t,this.input.setSelectionRange(e,e);var n=this.autoWrap(this.lastLine+s(t.substring(0,e)));this.moveCursor(this.numRows+n.numRows-1,n.colOffset,t.charAt(e))}this.enableInput()},t.prototype.setColor=function(t){var e=t.text,i=t.background;e&&(this.term.style.color=e,this.cursorBg.style.backgroundColor=e,this.tabPanel.style.color=e),i&&(this.term.style.backgroundColor=i,this.cursorContent.style.color=i)},t.prototype.setCommandHandler=function(t){this.commandHandler=t},t.prototype.setFont=function(t){var e=t.family,i=t.size;e&&(this.term.style.fontFamily=e,this.input.style.fontFamily=e),i&&(this.term.style.fontSize=i,this.input.style.fontSize=i),this.measurement.innerHTML="&nbsp;",this.charWidth=this.measurement.offsetWidth,this.charHeight=this.measurement.offsetHeight,this.cursor.style.height=this.charHeight+"px",this.cursorBg.style.height=this.charHeight-2+"px",this.resize()},t.prototype.setPadding=function(t){var e=t.top,i=t.right,s=t.bottom,n=t.left;void 0!==e&&(this.htmlPanel.style.marginTop=e),void 0!==i&&(this.htmlPanel.style.marginRight=i,this.tmpPanel.style.marginRight=i),void 0!==s&&(this.tmpPanel.style.marginBottom=s),void 0!==n&&(this.htmlPanel.style.marginLeft=n,this.tmpPanel.style.marginLeft=n)},t.prototype.setPrefix=function(t){this.prefix=t},t.prototype.setTabHandler=function(t){this.tabHandler=t},t.prototype.write=function(t){if(t){var e=!1;this.term.scrollHeight-this.term.scrollTop-this.term.offsetHeight<=1&&(e=!0),t=this.lastLine+this.input.value+t,this.input.value="";var i,s,n=t.split("\n"),r=n.length-1,o=this.htmlPanel.innerHTML;if(this.numRows--,r>0)for(var a=0;a<r;a++)o+=(s=this.autoWrap(n[a])).wrappedHTML+"\n",this.numRows+=s.numRows;i=(s=this.autoWrap(n[r])).wrappedHTML,this.numRows+=s.numRows,-1===(r=i.lastIndexOf("<br>"))?this.lastLine=i:(r+=4,o+=i.substring(0,r),this.lastLine=i.substring(r)),this.htmlPanel.innerHTML=o,this.tmpPanel.innerHTML=this.lastLine,this.moveCursor(this.numRows,s.colOffset),e&&(this.term.scrollTop=this.term.scrollHeight)}},t.prototype.addEventListeners=function(){var t=this;this.term.addEventListener("mouseup",(function(e){if(""===window.getSelection().toString()){var i=t.term.scrollTop;t.enableInput(),t.flashCursor(),t.term.scrollTop=i}})),this.term.addEventListener("copy",(function(t){var e=window.getSelection().toString();e&&(e=e.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," "),t.clipboardData.setData("text/plain",e)),t.preventDefault()})),this.term.addEventListener("paste",(function(e){var i=e.clipboardData.getData("text");if(i){i=i.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," ");var s=t.input.value,n=t.input.selectionStart,r=s.substring(0,n)+i;s=r+s.substring(n),t.input.value=s,t.input.setSelectionRange(r.length,r.length),t.history.items[t.history.index].modification=s,t.inputText(s)}e.preventDefault()})),this.input.addEventListener("input",(function(e){var i=t.input.value;t.history.items[t.history.index].modification=i,t.inputText(i)})),this.input.addEventListener("blur",(function(){clearInterval(t.timer),t.cursor.style.visibility="hidden",t.input.disabled=!0})),this.input.addEventListener("keydown",(function(e){var i,n,r,o;switch(e.keyCode){case 13:if(t.term.scrollTop=t.term.scrollHeight,i=t.input.value.trim(),t.input.value="",i){if(t.write(s(i)+"\n"),!t.isRunning){t.isRunning=!0,n=t.history.index;var a=t.history.items.length;t.history.items[a-1].value=i,t.history.items[n].modification="",t.history.index=a,t.history.items.push({value:"",modification:""}),t.commandHandler(i)}}else if(t.write("\n"),!t.isRunning){var l=t.history.items.length-1;t.history.items[l].modification="",t.history.index=l,t.end()}break;case 37:(n=t.input.selectionEnd-1)>=0&&(i=t.input.value,r=t.autoWrap(t.lastLine+s(i.substring(0,n))),t.moveCursor(t.numRows+r.numRows-1,r.colOffset,i.charAt(n)));break;case 39:(n=t.input.selectionEnd+1)<=(i=t.input.value).length&&(r=t.autoWrap(t.lastLine+s(i.substring(0,n))),t.moveCursor(t.numRows+r.numRows-1,r.colOffset,i.charAt(n)));break;case 38:n=t.history.index-1,(o=t.history.items[n])&&(t.history.index=n,(i=o.modification)||(i=o.value),t.input.value=i,t.inputText(i));break;case 40:n=t.history.index+1,(o=t.history.items[n])&&(t.history.index=n,(i=t.history.items[n].modification)||(i=o.value),t.input.value=i,t.inputText(i));break;case 9:if(console.log("Tab"),-1===t.promptIndex){for(var h,u=t.tabHandler(t.input.value.trim()),p=++t.promptIndex;p<t.promptIndex+4&&p<u.length;p++){h=u[p];var c=document.createElement("div");c.style.display="inline-block",c.style.height="100%",c.style.paddingLeft="10px",c.style.paddingRight="10px",c.innerHTML=p+". "+h,t.tabPanel.append(c)}t.promptIndex++}}}))},t.prototype.autoWrap=function(t){this.measurement.innerHTML=t;var e=this.measurement.innerText,i=this.getLineFeedIndices(e),s=i.lfIds;if(s===[])return{wrappedHTML:t,numRows:i.numRows,colOffset:i.colOffset};for(var n="",r=0,o=0,a=!1,l=0,h=s.shift();;){if(!h){n+=t.substring(l);break}switch(t.charAt(r)){case"<":a=!0,r++;continue;case">":a=!1,r++;continue;case"&":-1!==["&lt;","&gt;"].indexOf(t.substr(r,4))?r+=3:"&amp;"===t.substr(r,5)&&(r+=4)}a?r++:(r++,++o===h&&(n+=t.substring(l,r)+"<br>",l=r,h=s.shift()))}return{wrappedHTML:n,numRows:i.numRows,colOffset:i.colOffset}},t.prototype.clearPanel=function(){this.htmlPanel.innerHTML="",this.tmpPanel.innerHTML="",this.lastLine="",this.numRows=1},t.prototype.enableInput=function(){this.input.disabled=!1,this.input.focus(),this.cursor.style.visibility="visible"},t.prototype.flashCursor=function(){var t=this;clearInterval(this.timer),this.cursor.style.opacity="1";var e=1;this.timer=setInterval((function(){t.cursor.style.opacity=e++%2?"0":"1",7===e&&clearInterval(t.timer)}),500)},t.prototype.getLineFeedIndices=function(t){for(var e,i,n,r,o,a=0,l=this.htmlPanel.offsetWidth,h=[],u=0;e=t.substring(a),this.measurement.innerHTML=s(e),(i=this.measurement.offsetWidth)>l;)for(n=Math.floor(e.length*l/i),u=0;;){if(r=e.substring(0,n),this.measurement.innerHTML=s(r),(o=this.measurement.offsetWidth)===l){a+=n,h.push(a);break}if(o<l){if(u>0){a+=n,h.push(a);break}u<0?n++:(u=-1,n++)}else{if(u<0){a+=n-1,h.push(a);break}u>0?n--:(u=1,n--)}}return{lfIds:h,numRows:1+h.length,colOffset:i}},t.prototype.inputText=function(t){var e=this.autoWrap(this.lastLine+s(t));this.tmpPanel.innerHTML=e.wrappedHTML;var i=this.input.selectionStart;i===this.input.value.length?this.moveCursor(this.numRows+e.numRows-1,e.colOffset):(e=this.autoWrap(this.lastLine+s(t.substring(0,i))),this.moveCursor(this.numRows+e.numRows-1,e.colOffset,t.charAt(i)))},t.prototype.moveCursor=function(t,e,i){var s,n;i?(this.measurement.innerHTML=i,s=this.measurement.offsetWidth,n=this.measurement.offsetHeight):(i="&nbsp;",s=this.charWidth,n=this.charHeight),e+s>=this.htmlPanel.offsetWidth&&(t+=1,e=0);var r=n*(t-1);this.cursor.style.top=r+"px",this.cursor.style.left=e+"px",this.cursor.style.width=s+"px",this.cursorContent.innerHTML=i,this.flashCursor(),this.input.style.top=r+"px",this.input.style.left=e+"px"},t.prototype.setStyle=function(){this.term.style.position="relative",this.term.style.width="100%",this.term.style.minWidth="100px",this.term.style.height="100%",this.term.style.minHeight="30px",this.term.style.lineHeight="1.5",this.term.style.overflowX="hidden",this.term.style.overflowY="scroll",this.measurement.style.position="absolute",this.measurement.style.top="0",this.measurement.style.left="0",this.measurement.style.zIndex="-100",this.measurement.style.margin="0",this.input.style.position="absolute",this.input.style.top="0",this.input.style.left="0",this.input.style.zIndex="-100",this.input.style.width="0",this.input.style.border="none",this.input.style.padding="0",this.input.style.lineHeight="1.5",this.container.style.width="100%",this.container.style.height="calc(100% + 1px)",this.htmlPanel.style.width="100%",this.htmlPanel.style.margin="0",this.tmpPanel.style.width="100%",this.tmpPanel.style.margin="0",this.tabPanel.style.display="flex",this.tabPanel.style.justifyContent="space-around",this.tabPanel.style.position="absolute",this.tabPanel.style.top="100px",this.tabPanel.style.left="0",this.tabPanel.style.width="100%",this.tabPanel.style.height="3em",this.tabPanel.style.margin="5px",this.tabPanel.style.backgroundColor="rgba(255, 255, 255, 0.2)",this.tabPanel.style.lineHeight="3em",this.tabPanel.style.textOverflow="ellipsis",this.tabPanel.style.overflow="hidden",this.cursor.style.position="absolute",this.cursor.style.top="0",this.cursor.style.left="0",this.cursor.style.display="flex",this.cursor.style.alignItems="center",this.cursor.style.border="none",this.cursorBg.style.width="100%",this.cursorContent.style.position="absolute",this.cursorContent.style.top="0",this.cursorContent.style.left="0",this.cursorContent.style.height="100%",this.setPadding({top:"1px",bottom:"1px",left:"3px"}),this.setColor({text:"#eee",background:"#2e3436"}),this.setFont({family:"monospace",size:"14px"})},t}();e.IOTerm=n},function(t,e,i){"use strict";i.r(e);var s=i(0);document.getElementById("seResizeBtn").addEventListener("click",t=>{var e=document.getElementById("term");e.style.width=e.offsetWidth+50+"px",e.style.height=e.offsetHeight+10+"px",n.resize()});var n=new s.IOTerm(document.getElementById("term"));n.setColor({text:"#fff86f",background:"black"}),n.setFont({size:"12px"}),n.setPrefix(function({env:t,user:e,server:i,pwd:s}){return void 0===t&&(t="base"),void 0===e&&(e="admin"),void 0===i&&(i="Puter"),void 0===s&&(s="~"),"("+t+') <span style="color: #8ae234">'+e+"@"+i+'</span>:<span style="color: #729fcf">'+s+"</span>$ "}({})),n.setCommandHandler(t=>{t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t=Object(s.escapeText)(t);var e=0,i=setInterval(()=>{n.write(e+++"Hello, "+t+"\n"),3===e&&(clearInterval(i),n.end())},1e3)});n.write('Welcome to IOTerm. Please use escape characters "&amp;amp;", "&amp;lt;" and "&amp;gt;" instead of "&amp;", "&lt;" and "&gt;", if an ampersand, less-than sign or greater-than sign is needed to be shown. <span style="color: red">HTML tag &lt;span&gt; can be used for special style.</span> If a newline is wanted, please add line feed "\\n" rather than "\\r\\n" or HTML tag &lt;br&gt;.\n'),n.end()}]);