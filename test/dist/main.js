!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";function n(t){return t.replace(/[<>&]/g,(function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[t]}))}function s(){var t=document.createElement("div");t.style.position="absolute",t.style.width="100px",t.style.overflow="scroll";var e=document.createElement("div");e.style.width="100%",document.body.append(t),t.append(e);var i=t.offsetWidth-e.offsetWidth;return e.remove(),t.remove(),i}Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=n;var r=function(){function t(t){this.container=document.createElement("div"),this.panel=document.createElement("pre"),this.tmpPanel=document.createElement("pre"),this.prefix="",this.lastLine="",this.numRows=1,t.append(this.container),this.container.append(this.panel,this.tmpPanel),this.setStyle()}return t.prototype.clear=function(){this.panel.innerHTML="",this.tmpPanel.innerHTML="",this.lastLine="",this.numRows=1},t.prototype.setStyle=function(){this.container.style.width="100%",this.container.style.height="100%",this.panel.style.width="100%",this.panel.style.margin="0",this.tmpPanel.style.width="100%",this.tmpPanel.style.margin="0"},t}(),o=function(){function t(t){this.container=document.createElement("div"),this.background=document.createElement("div"),this.content=document.createElement("div"),t.append(this.container),this.container.append(this.background,this.content),this.setStyle()}return t.prototype.flash=function(){var t=this;clearInterval(this.timer),this.container.style.opacity="1";var e=1;this.timer=setInterval((function(){t.container.style.opacity=e++%2?"0":"1",7===e&&clearInterval(t.timer)}),500)},t.prototype.move=function(t,e,i,n){this.container.style.top=t+"px",this.container.style.left=e+"px",void 0===n&&(n="&nbsp;"),this.container.style.width=i+"px",this.content.innerHTML=n},t.prototype.setStyle=function(){this.container.style.position="absolute",this.container.style.top="0",this.container.style.left="0",this.container.style.display="flex",this.container.style.alignItems="center",this.container.style.border="none",this.background.style.width="100%",this.content.style.position="absolute",this.content.style.top="0",this.content.style.left="0",this.content.style.height="100%"},t}(),a=function(){function t(t){this.container=document.createElement("div"),this.panel=document.createElement("div"),this.scrollContainer=document.createElement("div"),this.count=0,this.handler=function(){return['<span style="color: #729fcf;">.</span>','<span style="color: #729fcf;">..</span>']},t.append(this.container),this.container.append(this.scrollContainer),this.scrollContainer.append(this.panel),this.setStyle()}return t.prototype.clear=function(){this.count=0,this.panel.innerHTML=""},t.prototype.createItem=function(t){var e=document.createElement("div");e.style.display="inline-block",e.style.height="100%",e.style.paddingRight="10px",e.innerHTML=t,this.panel.append(e)},t.prototype.setStyle=function(){this.container.style.position="absolute",this.container.style.top="100px",this.container.style.left="5px",this.container.style.right="5px",this.container.style.height="3em",this.container.style.overflow="hidden",this.scrollContainer.style.position="absolute",this.scrollContainer.style.top="0",this.scrollContainer.style.bottom=0-s()+"px",this.scrollContainer.style.width="100%",this.scrollContainer.style.overflowX="scroll",this.scrollContainer.style.overflowY="hidden",this.panel.style.width="100%",this.panel.style.height="3em",this.panel.style.boxSizing="border-box",this.panel.style.paddingLeft="10px",this.panel.style.paddingRight="10px",this.panel.style.backgroundColor="rgba(255, 255, 255, 0.2)",this.panel.style.lineHeight="3em"},t}(),l=function(){function t(t){var e=this;this.term=document.createElement("div"),this.container=document.createElement("div"),this.measurement=document.createElement("pre"),this.input=document.createElement("input"),t.append(this.term),this.term.append(this.container,this.measurement),this.container.append(this.input),this.main=new r(this.container),this.cursor=new o(this.container),this.minChar={width:0,height:0},this.isRunning=!1,this.commandHandler=function(){e.end()},this.history={index:0,items:[{value:"",modification:""}]},this.tab=new a(this.container),this.setStyle(),this.addEventListeners(),this.enableInput(),this.moveCursor(this.main.numRows,0)}return t.prototype.end=function(){this.isRunning=!1,this.write(this.main.prefix)},t.prototype.refresh=function(){var t=this.input.value,e=this.input.selectionStart;this.input.value="";var i=this.main.panel.innerHTML+this.main.lastLine;if(i=i.replace(/<br>/g,""),this.main.clear(),this.write(i),t){this.inputText(t),this.input.value=t,this.input.setSelectionRange(e,e);var s=this.autoWrap(this.main.lastLine+n(t.substring(0,e)));this.moveCursor(this.main.numRows+s.numRows-1,s.colOffset,t.charAt(e))}this.enableInput()},t.prototype.setColor=function(t){var e=t.text,i=t.background;e&&(this.term.style.color=e,this.cursor.background.style.backgroundColor=e),i&&(this.term.style.backgroundColor=i,this.cursor.content.style.color=i)},t.prototype.setCommandHandler=function(t){this.commandHandler=t},t.prototype.setFont=function(t){var e=t.family,i=t.size;e&&(this.term.style.fontFamily=e,this.input.style.fontFamily=e),i&&(this.term.style.fontSize=i,this.input.style.fontSize=i),this.measurement.innerHTML="&nbsp;",this.minChar.width=this.measurement.offsetWidth,this.minChar.height=this.measurement.offsetHeight,this.cursor.container.style.height=this.minChar.height+"px",this.cursor.background.style.height=this.minChar.height-2+"px"},t.prototype.setPadding=function(t){var e=t.top,i=t.right,n=t.bottom,s=t.left;void 0!==e&&(this.container.style.marginTop=e),void 0!==i&&(this.container.style.marginRight=i),void 0!==n&&(this.container.style.marginBottom=n),void 0!==s&&(this.container.style.marginLeft=s)},t.prototype.setPrefix=function(t){this.main.prefix=t},t.prototype.setTabHandler=function(t){this.tab.handler=t},t.prototype.write=function(t){if(t){var e=!1;this.term.scrollHeight-this.term.scrollTop-this.term.offsetHeight<=1&&(e=!0),t=this.main.lastLine+this.input.value+t,this.input.value="";var i,n,s=t.split("\n"),r=s.length-1,o=this.main.panel.innerHTML;if(this.main.numRows--,r>0)for(var a=0;a<r;a++)o+=(n=this.autoWrap(s[a])).wrappedHTML+"\n",this.main.numRows+=n.numRows;i=(n=this.autoWrap(s[r])).wrappedHTML,this.main.numRows+=n.numRows,-1===(r=i.lastIndexOf("<br>"))?this.main.lastLine=i:(r+=4,o+=i.substring(0,r),this.main.lastLine=i.substring(r)),this.main.panel.innerHTML=o,this.main.tmpPanel.innerHTML=this.main.lastLine,this.moveCursor(this.main.numRows,n.colOffset),e&&(this.term.scrollTop=this.term.scrollHeight)}},t.prototype.addEventListeners=function(){var t=this;this.term.addEventListener("mouseup",(function(e){if(""===window.getSelection().toString()){var i=t.term.scrollTop;t.enableInput(),t.cursor.flash(),t.term.scrollTop=i}})),this.term.addEventListener("copy",(function(t){var e=window.getSelection().toString();e&&(e=e.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," "),t.clipboardData.setData("text/plain",e)),t.preventDefault()})),this.term.addEventListener("paste",(function(e){var i=e.clipboardData.getData("text");if(i){i=i.replace(/\r\n/g," ").replace(/\r/g," ").replace(/\n/g," ");var n=t.input.value,s=t.input.selectionStart,r=n.substring(0,s)+i;n=r+n.substring(s),t.input.value=n,t.input.setSelectionRange(r.length,r.length),t.history.items[t.history.index].modification=n,t.inputText(n)}e.preventDefault()})),this.input.addEventListener("input",(function(e){var i=t.input.value;t.history.items[t.history.index].modification=i,t.inputText(i)})),this.input.addEventListener("blur",(function(){t.cursor.container.style.visibility="hidden",t.input.disabled=!0})),this.input.addEventListener("keydown",(function(e){var i,s,r,o;switch(e.keyCode){case 13:if(t.term.scrollTop=t.term.scrollHeight,i=t.input.value.trim(),t.input.value="",i){if(t.write(n(i)+"\n"),t.isRunning)break;t.isRunning=!0,s=t.history.index;var a=t.history.items.length;t.history.items[a-1].value=i,t.history.items[s].modification="",t.history.index=a,t.history.items.push({value:"",modification:""}),t.commandHandler(i)}else{if(t.write("\n"),t.isRunning)break;var l=t.history.items.length-1;t.history.items[l].modification="",t.history.index=l,t.end()}break;case 37:(s=t.input.selectionEnd-1)>=0&&(i=t.input.value,r=t.autoWrap(t.main.lastLine+n(i.substring(0,s))),t.moveCursor(t.main.numRows+r.numRows-1,r.colOffset,i.charAt(s)));break;case 39:(s=t.input.selectionEnd+1)<=(i=t.input.value).length&&(r=t.autoWrap(t.main.lastLine+n(i.substring(0,s))),t.moveCursor(t.main.numRows+r.numRows-1,r.colOffset,i.charAt(s)));break;case 38:s=t.history.index-1,(o=t.history.items[s])&&(t.history.index=s,(i=o.modification)||(i=o.value),t.input.value=i,t.inputText(i));break;case 40:s=t.history.index+1,(o=t.history.items[s])&&(t.history.index=s,(i=t.history.items[s].modification)||(i=o.value),t.input.value=i,t.inputText(i));break;case 9:var h=t.tab.count,u=void 0;if(0===h)for(var c=t.tab.handler(t.input.value.trim()),p=0;p<c.length;p++)t.tab.createItem(c[p]);0!==h&&((u=t.tab.panel.children[h-1]).style.backgroundColor="transparent"),(u=t.tab.panel.children[h])?t.tab.count=h+1:(u=t.tab.panel.children[0],t.tab.count=1),u.style.backgroundColor="rgba(255, 255, 255, 0.2)",e.preventDefault();break;case 27:console.log("ESC"),t.tab.clear()}}))},t.prototype.autoWrap=function(t){this.measurement.innerHTML=t;var e=this.measurement.innerText,i=this.getLineFeedIndices(e),n=i.lfIds;if(n===[])return{wrappedHTML:t,numRows:i.numRows,colOffset:i.colOffset};for(var s="",r=0,o=0,a=!1,l=0,h=n.shift();;){if(!h){s+=t.substring(l);break}switch(t.charAt(r)){case"<":a=!0,r++;continue;case">":a=!1,r++;continue;case"&":-1!==["&lt;","&gt;"].indexOf(t.substr(r,4))?r+=3:"&amp;"===t.substr(r,5)&&(r+=4)}a?r++:(r++,++o===h&&(s+=t.substring(l,r)+"<br>",l=r,h=n.shift()))}return{wrappedHTML:s,numRows:i.numRows,colOffset:i.colOffset}},t.prototype.enableInput=function(){this.input.disabled=!1,this.input.focus(),this.cursor.container.style.visibility="visible"},t.prototype.getLineFeedIndices=function(t){for(var e,i,s,r,o,a=0,l=this.main.panel.offsetWidth,h=[],u=0;e=t.substring(a),this.measurement.innerHTML=n(e),!((i=this.measurement.offsetWidth)<=l);)for(s=Math.floor(e.length*l/i),u=0;;){if(r=e.substring(0,s),this.measurement.innerHTML=n(r),(o=this.measurement.offsetWidth)===l){a+=s,h.push(a);break}if(o<l){if(u>0){a+=s,h.push(a);break}u<0?s++:(u=-1,s++)}else{if(u<0){a+=s-1,h.push(a);break}u>0?s--:(u=1,s--)}}return{lfIds:h,numRows:1+h.length,colOffset:i}},t.prototype.inputText=function(t){var e=this.autoWrap(this.main.lastLine+n(t));this.main.tmpPanel.innerHTML=e.wrappedHTML;var i=this.input.selectionStart;i===this.input.value.length?this.moveCursor(this.main.numRows+e.numRows-1,e.colOffset):(e=this.autoWrap(this.main.lastLine+n(t.substring(0,i))),this.moveCursor(this.main.numRows+e.numRows-1,e.colOffset,t.charAt(i)))},t.prototype.moveCursor=function(t,e,i){var n,s;i?(this.measurement.innerHTML=i,n=this.measurement.offsetWidth,s=this.measurement.offsetHeight):(i="&nbsp;",n=this.minChar.width,s=this.minChar.height),e+n>=this.main.panel.offsetWidth&&(t+=1,e=0);var r=s*(t-1);this.cursor.move(r,e,n,i),this.cursor.flash(),this.input.style.top=r+"px",this.input.style.left=e+"px"},t.prototype.setStyle=function(){this.term.style.position="relative",this.term.style.width="100%",this.term.style.minWidth="100px",this.term.style.height="100%",this.term.style.minHeight="30px",this.term.style.lineHeight="1.5",this.term.style.overflowX="hidden",this.term.style.overflowY="scroll",this.container.style.position="relative",this.container.style.width="calc(100% - "+s()+"px)",this.container.style.height="calc(100% + 1px)",this.measurement.style.position="absolute",this.measurement.style.top="0",this.measurement.style.left="0",this.measurement.style.zIndex="-100",this.measurement.style.margin="0",this.input.style.position="absolute",this.input.style.top="0",this.input.style.left="0",this.input.style.zIndex="-100",this.input.style.width="0",this.input.style.border="none",this.input.style.padding="0",this.input.style.lineHeight="1.5",this.setColor({text:"#eee",background:"#2e3436"}),this.setFont({family:"monospace",size:"14px"})},t}();e.IOTerm=l},function(t,e,i){"use strict";i.r(e);var n=i(0);document.getElementById("seResizeBtn").addEventListener("click",t=>{var e=document.getElementById("term");e.style.width=e.offsetWidth+50+"px",e.style.height=e.offsetHeight+10+"px",s.resize()});var s=new n.IOTerm(document.getElementById("term"));s.setPadding({top:"2px",left:"5px",bottom:"2px"}),s.setColor({text:"#fff86f",background:"black"}),s.setFont({size:"12px"}),s.setPrefix(function({env:t,user:e,server:i,pwd:n}){return void 0===t&&(t="base"),void 0===e&&(e="admin"),void 0===i&&(i="Puter"),void 0===n&&(n="~"),"("+t+') <span style="color: #8ae234">'+e+"@"+i+'</span>:<span style="color: #729fcf">'+n+"</span>$ "}({})),s.setCommandHandler(t=>{t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t=Object(n.escapeText)(t);var e=0,i=setInterval(()=>{s.write(e+++"Hello, "+t+"\n"),3===e&&(clearInterval(i),s.end())},1e3)});s.write('Welcome to IOTerm. Please use escape characters "&amp;amp;", "&amp;lt;" and "&amp;gt;" instead of "&amp;", "&lt;" and "&gt;", if an ampersand, less-than sign or greater-than sign is needed to be shown. <span style="color: red">HTML tag &lt;span&gt; can be used for special style.</span> If a newline is wanted, please add line feed "\\n" rather than "\\r\\n" or HTML tag &lt;br&gt;.\n'),s.end()}]);