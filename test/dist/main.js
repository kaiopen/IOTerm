!function(t){var e={};function s(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){"use strict";function r(t){return t.replace(/[<>&]/g,(function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[t]}))}Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=r;var n=function(){function t(t){this.term=document.createElement("div"),this.container=document.createElement("div"),this.htmlPanel=document.createElement("pre"),this.tmpPanel=document.createElement("pre"),this.measurement=document.createElement("pre"),this.cursor=document.createElement("div"),this.cursorBg=document.createElement("div"),this.cursorContent=document.createElement("div"),this.input=document.createElement("input"),t.append(this.term),this.term.append(this.measurement,this.cursor,this.input,this.container),this.cursor.append(this.cursorBg,this.cursorContent),this.container.append(this.htmlPanel,this.tmpPanel),this.prefix="",this.html="",this.lastLine="",this.numRows=1,this.backgroundColor="",this.textColor="",this.setStyle(),this.measurement.innerHTML="&nbsp;",this.CHARWIDTH=this.measurement.offsetWidth,this.CHARHEIGHT=this.measurement.offsetHeight,this.cursor.style.height=this.CHARHEIGHT+"px",this.cursorBg.style.height=this.CHARHEIGHT-2+"px",this.commandHandler=function(){},this.addEventListeners(),this.input.focus(),this.moveCursor(this.numRows,0)}return t.prototype.setStyle=function(){this.term.style.position="relative",this.term.style.width="100%",this.term.style.minWidth="100px",this.term.style.height="100%",this.term.style.minHeight="30px",this.term.style.fontSize="14px",this.term.style.fontFamily="monospace",this.term.style.lineHeight="1.5",this.term.style.overflowX="hidden",this.term.style.overflowY="scroll",this.measurement.style.position="absolute",this.measurement.style.top="0",this.measurement.style.left="0",this.measurement.style.zIndex="-100",this.measurement.style.margin="0",this.cursor.style.position="absolute",this.cursor.style.top="0",this.cursor.style.left="0",this.cursor.style.display="flex",this.cursor.style.alignItems="center",this.cursor.style.border="none",this.cursor.style.fontSize="14px",this.cursor.style.fontFamily="monospace",this.cursor.style.lineHeight="1.5",this.cursor.style.opacity="1",this.cursorBg.style.width="100%",this.cursorContent.style.position="absolute",this.cursorContent.style.top="0",this.cursorContent.style.left="0",this.cursorContent.style.height="100%",this.input.style.position="absolute",this.input.style.top="0",this.input.style.left="0",this.input.style.zIndex="-100",this.input.style.width="0",this.input.style.border="none",this.input.style.padding="0",this.input.style.fontSize="14px",this.input.style.fontFamily="monospace",this.input.style.lineHeight="1.5";var t=function(){var t=document.createElement("div");t.style.position="absolute",t.style.width="100px",t.style.overflow="scroll";var e=document.createElement("div");e.style.width="100%",document.body.append(t),t.append(e);var s=t.offsetWidth-e.offsetWidth;return e.remove(),t.remove(),s}();this.container.style.width=this.term.offsetWidth-t+"px",this.container.style.height=this.term.offsetHeight+1+"px",this.htmlPanel.style.width="100%",this.htmlPanel.style.margin="0",this.tmpPanel.style.width="100%",this.tmpPanel.style.margin="0",this.setColor({text:"#eee",background:"#2e3436"})},t.prototype.getLineFeedIndices=function(t){for(var e,s,n,i,o,a=0,l=this.htmlPanel.offsetWidth,u=[],h=0;e=t.substring(a),this.measurement.innerHTML=r(e),(s=this.measurement.offsetWidth)>l;)for(n=Math.floor(e.length*l/s),h=0;;){if(i=e.substring(0,n),this.measurement.innerHTML=r(i),(o=this.measurement.offsetWidth)===l){a+=n,u.push(a);break}if(o<l){if(h>0){a+=n,u.push(a);break}h<0?n++:(h=-1,n++)}else{if(h<0){a+=n-1,u.push(a);break}h>0?n--:(h=1,n--)}}return{lfIds:u,numRows:1+u.length,colOffset:s}},t.prototype.autoWrap=function(t){this.measurement.innerHTML=t;var e=this.measurement.innerText,s=this.getLineFeedIndices(e),r=s.lfIds;if(r===[])return{wrappedHTML:t,numRows:s.numRows,colOffset:s.colOffset};for(var n="",i=0,o=0,a=!1,l=0,u=r.shift();;){if(!u){n+=t.substring(l);break}switch(t.charAt(i)){case"<":a=!0,i++;continue;case">":a=!1,i++;continue;case"&":-1!==["&lt;","&gt;"].indexOf(t.substr(i,4))?i+=3:"&amp;"===t.substr(i,5)&&(i+=4)}a?i++:(i++,++o===u&&(n+=t.substring(l,i)+"<br>",l=i,u=r.shift()))}return{wrappedHTML:n,numRows:s.numRows,colOffset:s.colOffset}},t.prototype.moveCursor=function(t,e,s){var r,n;s?(this.measurement.innerHTML=s,r=this.measurement.offsetWidth,n=this.measurement.offsetHeight):(s="&nbsp;",r=this.CHARWIDTH,n=this.CHARHEIGHT),e+r>=this.htmlPanel.offsetWidth&&(t+=1,e=0);var i=n*(t-1);this.cursor.style.top=i+"px",this.cursor.style.left=e+"px",this.cursor.style.width=r+"px",this.cursorContent.innerHTML=s,this.flashCursor(),this.input.style.top=i+"px",this.input.style.left=e+"px"},t.prototype.flashCursor=function(){var t=this;clearInterval(this.timer),this.cursor.style.opacity="1";var e=1;this.timer=setInterval((function(){t.cursor.style.opacity=e++%2?"0":"1",7===e&&clearInterval(t.timer)}),500)},t.prototype.addEventListeners=function(){var t=this;this.term.addEventListener("mouseup",(function(){if(""===window.getSelection().toString()){var e=t.term.scrollTop;t.input.focus(),t.flashCursor(),t.term.scrollTop=e}})),this.term.addEventListener("copy",(function(t){var e=window.getSelection().toString();e=e.replace(/\r\n/g,"").replace(/\r/g,"").replace(/\n/g,""),t.clipboardData.setData("text/plain",e),t.preventDefault()})),this.term.addEventListener("paste",(function(e){var s=e.clipboardData.getData("text"),n=(s=s.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).split("\n")[0];t.write(r(n+"\n")),t.isRunning||(t.isRunning=!0,t.commandHandler(n)),e.preventDefault()})),this.input.addEventListener("input",(function(e){var s=e.target.value,n=t.autoWrap(t.lastLine+r(s));t.tmpPanel.innerHTML=n.wrappedHTML;var i=e.target.selectionStart;i===s.length?t.moveCursor(t.numRows+n.numRows-1,n.colOffset):(n=t.autoWrap(t.lastLine+r(s.substring(0,i))),t.moveCursor(t.numRows+n.numRows-1,n.colOffset,s.charAt(i)))})),this.input.addEventListener("blur",(function(){clearInterval(t.timer),t.cursor.style.opacity="0"})),this.input.addEventListener("keydown",(function(e){var s,n,i;switch(e.keyCode){case 13:t.term.scrollTop=t.term.scrollHeight,s=e.target.value,e.target.value="",t.write(r(s+"\n")),t.isRunning||(t.isRunning=!0,t.commandHandler(s));break;case 37:(n=t.input.selectionEnd-1)>=0&&(s=e.target.value,i=t.autoWrap(t.lastLine+r(s.substring(0,n))),t.moveCursor(t.numRows+i.numRows-1,i.colOffset,s.charAt(n)));break;case 39:(n=t.input.selectionEnd+1)<=(s=e.target.value).length&&(i=t.autoWrap(t.lastLine+r(s.substring(0,n))),t.moveCursor(t.numRows+i.numRows-1,i.colOffset,s.charAt(n)))}}))},t.prototype.setColor=function(t){var e=t.text,s=t.background;e&&(this.textColor=e),s&&(this.backgroundColor=s),this.term.style.backgroundColor=this.backgroundColor,this.term.style.color=this.textColor,this.cursorBg.style.backgroundColor=this.textColor,this.cursorContent.style.color=this.backgroundColor},t.prototype.setPrefix=function(t){this.prefix=t},t.prototype.setCommandHandler=function(t){this.commandHandler=t},t.prototype.end=function(){this.isRunning=!1,this.write(this.prefix)},t.prototype.write=function(t){var e=!1;this.term.scrollHeight-this.term.scrollTop-this.term.offsetHeight<=1&&(e=!0),t=this.lastLine+this.input.value+t,this.input.value="";var s,r,n=t.split("\n"),i=n.length-1;if(this.numRows--,i>0)for(var o=0;o<i;o++)r=this.autoWrap(n[o]),this.html+=r.wrappedHTML+"\n",this.numRows+=r.numRows;s=(r=this.autoWrap(n[i])).wrappedHTML,this.numRows+=r.numRows,-1===(i=s.lastIndexOf("<br>"))?this.lastLine=s:(i+=4,this.html+=s.substring(0,i),this.lastLine=s.substring(i)),this.htmlPanel.innerHTML=this.html,this.tmpPanel.innerHTML=this.lastLine,this.moveCursor(this.numRows,r.colOffset),e&&(this.term.scrollTop=this.term.scrollHeight)},t}();e.IOTerm=n},function(t,e,s){"use strict";s.r(e);var r=s(0),n={env:"base",user:"admin",server:"Puter",pwd:"~",prefix:""};!function({env:t,user:e,server:s,pwd:r}){void 0!==t&&(n.env=t),void 0!==e&&(n.user=e),void 0!==s&&(n.server=s),void 0!==r&&(n.pwd=r),n.prefix="("+n.env+') <span style="color: #8ae234">'+n.user+"@"+n.server+'</span>:<span style="color: #729fcf">'+n.pwd+"</span>$ "}({});var i=new r.IOTerm(document.getElementById("term"));i.setColor({text:"#fff86f",background:"black"}),i.setPrefix(n.prefix),i.setCommandHandler(t=>{t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t=Object(r.escapeText)(t);var e=0,s=setInterval(()=>{i.write(e+++"Hello, "+t+"\n"),3===e&&(clearInterval(s),i.end())},1e3)}),i.write('Welcome to IOTerm. Please use escape characters "&amp;amp;", "&amp;lt;" and "&amp;gt;" instead of "&amp;", "&lt;" and "&gt;", if an ampersand, less-than sign or greater-than sign is needed to be shown. <span style="color: red">HTML tag &lt;span&gt; can be used for special style.</span> If a newline is wanted, please add line feed "\\n" rather than "\\r\\n" or HTML tag &lt;br&gt;.\n'),i.write(n.prefix)}]);